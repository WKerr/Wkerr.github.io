<header>
    <h1><a href="#!/{{post.year}}/{{post.month}}/{{post.day}}/{{post.file}}">{{post.name}}</a></h1>
    <p>{{post.desc}}</p>
    <p>The majority of the tutorial will be done assuming IDE support.</p>
</header>
<section>
    <h2>Setting up the SonarQube Development Environment</h2>
    <p>The SonarQube server is needed to act as our local development server to hold and display dashboard reports. The scanner tool will be run against a specific code base or report and send the results to the server to be parsed.</p>
    <b>Things that are needed:</b>
    <ol>
        <li>Download the latest SonarQube server and scanner at, <a href="http://www.sonarqube.org/downloads/">http://www.sonarqube.org/downloads/</a></li>
        <li>Get the latest plugin Java source files and set up workspace using Maven. <a href="http://docs.sonarqube.org/display/PLUG/Generic+Test+Coverage">http://docs.sonarqube.org/display/PLUG/Generic+Test+Coverage</a></li>
    </ol>
    <p>*Note: Test that the standalone server works by running located in, "bin/{environment}/" folder in the SonarQube folder. Where {environment} is the current operating system.</p>
    <p>*Note: maven is require either by cmd or in your IDE.</p>
    <p>When setting up for IDE, import the project using Maven pom.xml. Make sure the Java language level is set to 6+.</p>
</section>
<section>
    <h2>Build the Jar</h2>
    <p>To produce the standalone jar file, run the maven commands in the project root where pom.xml is located.
    <pre>maven clean compile install</pre> The resulting jar file should be located in the root of the project under, "/target/sonar-generic-imports.jar". (If an error occurs while running see debug section for more information). For specific plugin information see related sections.</p>
</section>
<section>
    <h2>How to Deploy Plugin to the Server?</h2>
    <p>In order for the plugin to be run you must compile  into a JAR file and placed in the server plugin folder. The plugin will be picked up on the next server restart.

        Sonar Plugin folder: <pre>{Sonar-Server}/extensions/plugins/</pre>

        If an error occurs on the next restart see the debug section for more details.
    </p>
</section>
<section>
    <h2>How to debug</h2>
    <p>Maven - check the stack trace of the run by adding either flag, '-X','-e'. The first will give the full debug log and other respectively will return the full error stack trace.
    </p>
    <p>SonarQube Server - If the server fails to start, check the server logs for additional information. A stack trace is provided if it is caused by the plugin.
    </p>
    <p>SonarQube Scanner - If the scanner fails to run, check the console output for additional information. A stack trace can be found by adding additional flag, '-X'. If you would like to step through the code see below for more information.
    </p>
    <h3>Modifying Sonar Scanner Debug Mode</h3>
    <ol>
        <li>Include the following settings in the batch file of the Scanner:
            SET SONAR_RUNNER_OPTS=-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000

            It will have worked correctly if it starts waiting for a host to connect to port 8000.
        </li>
        <li>Set up IDE to do a remote connection with host:localhost port:8000</li>
        <li>Run the remote connect after starting the Scanner</li>
    </ol>
    <h3>Modifying Sonar Server to Debug Mode (never worked for me)</h3>
    <ol>
        <li>Modify, 'conf/wrapper.conf' file in SonarQube server.</li>
        <li>Add, 'wrapper.java.additional.2=-agentlib:jdwp=transport=dt_socket,server=y,address=8001' to the file</li>
        <li>Set up IDE to do a remote connection with host:localhost port:8001</li>
        <li>Run the remote connect after starting the SonarQube Server</li>
    </ol>

</section>
<footer>
    <h3>Closing Remarks</h3>
    <p>Future posts will cover how to modify the plugin to suit your needs.</p>
</footer>


